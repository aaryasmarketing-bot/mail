<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Aarya Shrivastav - Email Marketing</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<header class="text-center py-5 bg-primary text-white">
    <div class="container">
        <h1 class="display-4 fw-bold">Aarya Shrivastav</h1>
        <p class="lead mt-3">Helping Small Businesses Grow Revenue & Engage Customers with Professional Email Campaigns</p>
        <a href="#free-trial" class="btn btn-light btn-lg mt-4">Book Your Free Trial</a>
    </div>
</header>

<section class="container py-5">
    <h2 class="text-center mb-4">Why Hire Me?</h2>
    <div class="row text-center">
        {% for advantage in advantages %}
        <div class="col-md-3 mb-3">
            <div class="card h-100 p-3">
                <h5>{{ advantage }}</h5>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<section class="bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-4">Services I Offer</h2>
        <div class="row text-center">
            {% for service in services %}
            <div class="col-md-3 mb-3">
                <div class="card h-100 p-3">
                    <h5>{{ service }}</h5>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="container py-5">
    <h2 class="text-center mb-4">How It Works</h2>
    <ol class="fs-5">
        {% for step in how_it_works %}
        <li>{{ step }}</li>
        {% endfor %}
    </ol>
</section>

<section class="bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-4">Testimonials</h2>
        <div class="row">
            {% for testimonial in testimonials %}
            <div class="col-md-6 mb-3">
                <div class="card p-3">
                    <p>"{{ testimonial.text }}"</p>
                    <p><strong>- {{ testimonial.name }}</strong></p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Free Trial Section (single service) -->
<section id="free-trial" class="container py-5">
    <h2 class="text-center mb-4">Free Trial Signup</h2>
    <form method="POST" class="mx-auto p-4 bg-white rounded shadow-sm" style="max-width:500px;">
        <input type="text" name="name" placeholder="Your Name" required class="form-control mb-2">
        <input type="email" name="email" placeholder="Your Email" required class="form-control mb-2">
        <input type="text" name="company" placeholder="Company Name" class="form-control mb-2">

        <select name="service" required class="form-select mb-2">
            <option value="">Select One Service for Free Trial</option>
            {% for service in services %}
            <option value="{{ service }}">{{ service }}</option>
            {% endfor %}
        </select>

        <textarea name="message" placeholder="Additional Message" class="form-control mb-2"></textarea>
        <button type="submit" class="btn btn-primary w-100">Submit Free Trial</button>
    </form>
</section>

<!-- Pay for Services Section (multiple services) -->
<section id="pay-services" class="container py-5">
    <h2 class="text-center mb-4">Pay for Services</h2>
    <div class="mx-auto p-4 bg-white rounded shadow-sm" style="max-width:500px;">
        <div class="mb-2">
            <label class="form-label">Select Services to Pay For:</label>
            {% for service in services %}
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="pay_services" value="{{ service }}" id="pay_{{ service }}">
                <label class="form-check-label" for="pay_{{ service }}">{{ service }}</label>
            </div>
            {% endfor %}
        </div>
        <div id="paypal-button-container" class="mx-auto mt-3" style="max-width:400px;"></div>
    </div>
</section>

<footer class="text-center py-3 bg-dark text-white">
    <p>Contact: aarya.s.marketing@gmail.com | GDPR & CAN-SPAM Compliant</p>
</footer>

<script src="https://www.paypal.com/sdk/js?client-id=AanMSH3eQAaNbb-U2_YCv4ZAjjIBWx7RfsDcv5MpqlhavFGSFzfUxgkxhMdEYzck5Vz4dLbIUCp9qWvU&currency=USD"></script>
<script>
paypal.Buttons({
    createOrder: function(data, actions) {
        const selected = Array.from(document.querySelectorAll('input[name="pay_services"]:checked')).map(el => el.value);
        if(selected.length === 0) {
            alert("Please select at least one service to pay.");
            return;
        }

        const servicePrices = {
            "Email Campaign Creation": 20.00,
            "Welcome/Onboarding Sequences": 25.00,
            "Newsletters & Automation": 30.00,
            "Analytics & Reporting": 15.00
        };

        const total = selected.reduce((sum, s) => sum + (servicePrices[s] || 0), 0);

        return actions.order.create({
            purchase_units: [{
                amount: { value: total.toFixed(2) }
            }]
        });
    },
    onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
            const name = document.querySelector('input[name="name"]').value;
            const email = document.querySelector('input[name="email"]').value;
            const company = document.querySelector('input[name="company"]').value;
            const selected = Array.from(document.querySelectorAll('input[name="pay_services"]:checked')).map(el => el.value);

            fetch('/paypal_capture', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name, email, company, services: selected})
            }).then(() => {
                window.location.href = "/success";
            });
        });
    },
    onCancel: function(data) {
        window.location.href = "/cancel";
    }
}).render('#paypal-button-container');
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Aarya Shrivastav - Email Marketing</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/style.css">
    <!-- PayPal JS SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=USD"></script>
</head>
<body>

<!-- Hero Section -->
<header class="text-center py-5 bg-primary text-white">
    <div class="container">
        <h1 class="display-4 fw-bold">Aarya Shrivastav</h1>
        <p class="lead mt-3">Helping Small Businesses Grow Revenue & Engage Customers with Professional Email Campaigns</p>
        <a href="#free-trial" class="btn btn-light btn-lg mt-4">Book Your Free Trial</a>
    </div>
</header>

<!-- Advantages Section -->
<section class="container py-5">
    <h2 class="text-center mb-4">Why Hire Me?</h2>
    <div class="row text-center">
        {% for advantage in advantages %}
        <div class="col-md-3 mb-3">
            <div class="card h-100 p-3">
                <h5>{{ advantage }}</h5>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Services Section -->
<section class="bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-4">Services I Offer</h2>
        <div class="row text-center">
            {% for service in services %}
            <div class="col-md-3 mb-3">
                <div class="card h-100 p-3">
                    <h5>{{ service }}</h5>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="container py-5">
    <h2 class="text-center mb-4">How It Works</h2>
    <ol class="fs-5">
        {% for step in how_it_works %}
        <li>{{ step }}</li>
        {% endfor %}
    </ol>
</section>

<!-- Testimonials Section -->
<section class="bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-4">Testimonials</h2>
        <div class="row">
            {% for testimonial in testimonials %}
            <div class="col-md-6 mb-3">
                <div class="card p-3">
                    <p>"{{ testimonial.text }}"</p>
                    <p><strong>- {{ testimonial.name }}</strong></p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Free Trial & PayPal Section -->
<section id="free-trial" class="container py-5">
    <h2 class="text-center mb-4">Free Trial Signup</h2>

    <!-- Free Trial Form -->
    <form action="/free-trial" method="POST" class="mx-auto p-4 bg-white rounded shadow-sm" style="max-width: 500px;">
        <input type="text" name="name" placeholder="Your Name" required class="form-control mb-2">
        <input type="email" name="email" placeholder="Your Email" required class="form-control mb-2">
        <input type="text" name="company" placeholder="Company Name" class="form-control mb-2">
        <select name="service" required class="form-select mb-2">
            <option value="">Select One Service for Free Trial</option>
            {% for service in services %}
            <option>{{ service }}</option>
            {% endfor %}
        </select>
        <textarea name="message" placeholder="Additional Message" class="form-control mb-2"></textarea>
        <button type="submit" class="btn btn-primary w-100 mb-2">Submit Free Trial</button>
    </form>

    <h3 class="text-center mt-5">Or Pay for Services</h3>

    <!-- PayPal Multi-Service Form -->
    <div class="mx-auto p-4 bg-white rounded shadow-sm" style="max-width: 500px;">
        <input type="text" id="paypal-name" placeholder="Your Name" class="form-control mb-2" required>
        <input type="email" id="paypal-email" placeholder="Your Email" class="form-control mb-2" required>

        <h5>Select Services to Purchase:</h5>
        <div id="paypal-services" class="mb-3">
            {% for service in services %}
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="{{ service }}" id="service-{{ loop.index }}">
                <label class="form-check-label" for="service-{{ loop.index }}">{{ service }}</label>
            </div>
            {% endfor %}
        </div>

        <div id="paypal-button-container"></div>
    </div>

    <script>
    paypal.Buttons({
        createOrder: function(data, actions) {
            const name = document.getElementById("paypal-name").value.trim();
            const email = document.getElementById("paypal-email").value.trim();
            if (!name || !email) {
                alert("Please enter your name and email.");
                return;
            }

            const checkboxes = document.querySelectorAll('#paypal-services input[type="checkbox"]:checked');
            if (checkboxes.length === 0) {
                alert("Please select at least one service.");
                return;
            }

            let prices = {
                "Email Campaign Creation": 50,
                "Welcome/Onboarding Sequences": 40,
                "Newsletters & Automation": 60,
                "Analytics & Reporting": 30
            };

            let total = 0;
            let description = [];
            let selectedServices = [];
            checkboxes.forEach(cb => {
                total += prices[cb.value] || 0;
                description.push(cb.value);
                selectedServices.push(cb.value);
            });

            // Store selected services and client info in dataset for use in onApprove
            actions.selectedServices = selectedServices;
            actions.clientName = name;
            actions.clientEmail = email;

            return actions.order.create({
                purchase_units: [{
                    amount: { value: total.toString() },
                    description: description.join(", ")
                }]
            });
        },
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                // Log paid client to backend
                fetch("/paypal-success", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        name: actions.clientName,
                        email: actions.clientEmail,
                        services: actions.selectedServices
                    })
                });

                alert('Payment completed by ' + details.payer.name.given_name);
                window.location.href = "/success";
            });
        },
        onCancel: function(data) {
            window.location.href = "/cancel";
        }
    }).render('#paypal-button-container');
    </script>
</section>

<!-- Footer -->
<footer class="text-center py-3 bg-dark text-white">
    <p>Contact: aarya.s.marketing@gmail.com | GDPR & CAN-SPAM Compliant</p>
</footer>

</body>
</html>
